import 'dart:math';

import 'package:stroke_reducer/stroke_reducer.dart';
import 'package:test/test.dart';

void main() {
  group('StrokeReducer', () {
    late StrokeReducer strokeReducer;

    setUpAll(() {
      strokeReducer = StrokeReducer(maxPointsQuantity: 20);
    });

    test('reduces horizontal strokes', () {
      final strokesReduced = strokeReducer.reduce(horizontalStroke);
      expect(strokesReduced, const [
        Point(4.814077, 47.642762),
        Point(28.798981, 48.55495),
        Point(38.010905, 47.558835),
        Point(49.576872, 48.384759),
        Point(56.525863, 47.373498),
        Point(65.215228, 48.967807),
        Point(78.928414, 49.09821),
        Point(91.467464, 48.306773),
      ]);
    });

    test('reduces vertical strokes', () {
      final strokesReduced = strokeReducer.reduce(verticalStroke);
      expect(strokesReduced, const [
        Point(4.814077, 47.642762),
        Point(28.798981, 48.55495),
        Point(38.010905, 47.558835),
        Point(49.576872, 48.384759),
        Point(56.525863, 47.373498),
        Point(65.215228, 48.967807),
        Point(78.928414, 49.09821),
        Point(91.467464, 48.306773),
      ]);
    });
  });
}

const horizontalStroke = [
  Point(4.814077, 47.642762),
  Point(5.0354139, 47.642762),
  Point(5.2597623, 47.67915),
  Point(5.4780877, 47.642762),
  Point(5.6001352, 47.622421),
  Point(5.6927114, 47.515887),
  Point(5.810093, 47.47676),
  Point(6.69303, 47.182447),
  Point(8.5493517, 47.642762),
  Point(9.4621514, 47.642762),
  Point(9.7422672, 47.642762),
  Point(10.811783, 47.49837),
  Point(10.956175, 47.642762),
  Point(10.995303, 47.68189),
  Point(10.906683, 47.784019),
  Point(10.956175, 47.808765),
  Point(11.160238, 47.910796),
  Point(11.398849, 47.919433),
  Point(11.620186, 47.974768),
  Point(12.382831, 48.165429),
  Point(13.498658, 47.974768),
  Point(14.276228, 47.974768),
  Point(14.817969, 47.974768),
  Point(15.95487, 48.214464),
  Point(16.434263, 47.974768),
  Point(17.172958, 47.60542),
  Point(23.021065, 47.706291),
  Point(23.73838, 47.808765),
  Point(24.748408, 47.953055),
  Point(25.84718, 47.828226),
  Point(26.726428, 47.974768),
  Point(27.192376, 48.052426),
  Point(27.668595, 48.178155),
  Point(28.054449, 48.306773),
  Point(28.798981, 48.55495),
  Point(30.68373, 48.306773),
  Point(31.540505, 48.306773),
  Point(32.966372, 48.306773),
  Point(34.475851, 48.416915),
  Point(35.856574, 48.14077),
  Point(36.788514, 47.954382),
  Point(38.010905, 47.558835),
  Point(39.010624, 47.808765),
  Point(40.041775, 48.066553),
  Point(41.102948, 47.823092),
  Point(42.164675, 47.974768),
  Point(43.903042, 48.223106),
  Point(45.206256, 48.306773),
  Point(46.978752, 48.306773),
  Point(48.256898, 48.306773),
  Point(49.576872, 48.384759),
  Point(50.796813, 48.14077),
  Point(51.216773, 48.056778),
  Point(51.709625, 48.244573),
  Point(52.124834, 48.14077),
  Point(52.200752, 48.121791),
  Point(52.214919, 47.993747),
  Point(52.290837, 47.974768),
  Point(52.863709, 47.83155),
  Point(53.543994, 48.117986),
  Point(54.116866, 47.974768),
  Point(55.118013, 47.724481),
  Point(56.525863, 47.373498),
  Point(57.602922, 47.642762),
  Point(57.842995, 47.702781),
  Point(58.021957, 47.939771),
  Point(58.266932, 47.974768),
  Point(61.547142, 48.443369),
  Point(57.3955, 47.590907),
  Point(59.594954, 48.14077),
  Point(59.855374, 48.205875),
  Point(60.74563, 47.963426),
  Point(60.922975, 48.14077),
  Point(60.962102, 48.179898),
  Point(60.883848, 48.267646),
  Point(60.922975, 48.306773),
  Point(61.042083, 48.425881),
  Point(61.561182, 48.268412),
  Point(61.752988, 48.306773),
  Point(62.504014, 48.456978),
  Point(63.137222, 48.708056),
  Point(63.911023, 48.804781),
  Point(65.215228, 48.967807),
  Point(66.817826, 48.887431),
  Point(68.061089, 48.638778),
  Point(69.30781, 48.389434),
  Point(72.254341, 48.649575),
  Point(73.539177, 48.970784),
  Point(73.773, 49.029239),
  Point(78.928414, 49.09821),
  Point(79.183267, 48.970784),
  Point(79.25326, 48.935787),
  Point(79.273352, 48.82376),
  Point(79.34927, 48.804781),
  Point(80.329633, 48.55969),
  Point(85.026187, 48.804781),
  Point(86.155379, 48.804781),
  Point(86.433989, 48.804781),
  Point(88.938368, 48.843837),
  Point(88.977424, 48.804781),
  Point(89.198761, 48.583444),
  Point(88.625279, 48.645491),
  Point(89.143426, 48.472776),
  Point(89.34263, 48.406375),
  Point(89.608234, 48.539177),
  Point(89.807437, 48.472776),
  Point(91.009863, 48.071967),
  Point(89.545716, 48.520635),
  Point(90.305445, 48.14077),
  Point(90.687664, 47.949661),
  Point(91.162719, 48.306773),
  Point(91.467464, 48.306773),
];

const verticalStroke = [
  Point(4.814077, 47.642762),
  Point(5.0354139, 47.642762),
  Point(5.2597623, 47.67915),
  Point(5.4780877, 47.642762),
  Point(5.6001352, 47.622421),
  Point(5.6927114, 47.515887),
  Point(5.810093, 47.47676),
  Point(6.69303, 47.182447),
  Point(8.5493517, 47.642762),
  Point(9.4621514, 47.642762),
  Point(9.7422672, 47.642762),
  Point(10.811783, 47.49837),
  Point(10.956175, 47.642762),
  Point(10.995303, 47.68189),
  Point(10.906683, 47.784019),
  Point(10.956175, 47.808765),
  Point(11.160238, 47.910796),
  Point(11.398849, 47.919433),
  Point(11.620186, 47.974768),
  Point(12.382831, 48.165429),
  Point(13.498658, 47.974768),
  Point(14.276228, 47.974768),
  Point(14.817969, 47.974768),
  Point(15.95487, 48.214464),
  Point(16.434263, 47.974768),
  Point(17.172958, 47.60542),
  Point(23.021065, 47.706291),
  Point(23.73838, 47.808765),
  Point(24.748408, 47.953055),
  Point(25.84718, 47.828226),
  Point(26.726428, 47.974768),
  Point(27.192376, 48.052426),
  Point(27.668595, 48.178155),
  Point(28.054449, 48.306773),
  Point(28.798981, 48.55495),
  Point(30.68373, 48.306773),
  Point(31.540505, 48.306773),
  Point(32.966372, 48.306773),
  Point(34.475851, 48.416915),
  Point(35.856574, 48.14077),
  Point(36.788514, 47.954382),
  Point(38.010905, 47.558835),
  Point(39.010624, 47.808765),
  Point(40.041775, 48.066553),
  Point(41.102948, 47.823092),
  Point(42.164675, 47.974768),
  Point(43.903042, 48.223106),
  Point(45.206256, 48.306773),
  Point(46.978752, 48.306773),
  Point(48.256898, 48.306773),
  Point(49.576872, 48.384759),
  Point(50.796813, 48.14077),
  Point(51.216773, 48.056778),
  Point(51.709625, 48.244573),
  Point(52.124834, 48.14077),
  Point(52.200752, 48.121791),
  Point(52.214919, 47.993747),
  Point(52.290837, 47.974768),
  Point(52.863709, 47.83155),
  Point(53.543994, 48.117986),
  Point(54.116866, 47.974768),
  Point(55.118013, 47.724481),
  Point(56.525863, 47.373498),
  Point(57.602922, 47.642762),
  Point(57.842995, 47.702781),
  Point(58.021957, 47.939771),
  Point(58.266932, 47.974768),
  Point(61.547142, 48.443369),
  Point(57.3955, 47.590907),
  Point(59.594954, 48.14077),
  Point(59.855374, 48.205875),
  Point(60.74563, 47.963426),
  Point(60.922975, 48.14077),
  Point(60.962102, 48.179898),
  Point(60.883848, 48.267646),
  Point(60.922975, 48.306773),
  Point(61.042083, 48.425881),
  Point(61.561182, 48.268412),
  Point(61.752988, 48.306773),
  Point(62.504014, 48.456978),
  Point(63.137222, 48.708056),
  Point(63.911023, 48.804781),
  Point(65.215228, 48.967807),
  Point(66.817826, 48.887431),
  Point(68.061089, 48.638778),
  Point(69.30781, 48.389434),
  Point(72.254341, 48.649575),
  Point(73.539177, 48.970784),
  Point(73.773, 49.029239),
  Point(78.928414, 49.09821),
  Point(79.183267, 48.970784),
  Point(79.25326, 48.935787),
  Point(79.273352, 48.82376),
  Point(79.34927, 48.804781),
  Point(80.329633, 48.55969),
  Point(85.026187, 48.804781),
  Point(86.155379, 48.804781),
  Point(86.433989, 48.804781),
  Point(88.938368, 48.843837),
  Point(88.977424, 48.804781),
  Point(89.198761, 48.583444),
  Point(88.625279, 48.645491),
  Point(89.143426, 48.472776),
  Point(89.34263, 48.406375),
  Point(89.608234, 48.539177),
  Point(89.807437, 48.472776),
  Point(91.009863, 48.071967),
  Point(89.545716, 48.520635),
  Point(90.305445, 48.14077),
  Point(90.687664, 47.949661),
  Point(91.162719, 48.306773),
  Point(91.467464, 48.306773),
];
